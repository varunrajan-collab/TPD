<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Simulation: Teacher Decisions</title>
    <style>
        :root {
            /* NEW AESTHETIC: Warm, Modern, Editorial */
            
            /* Backgrounds */
            --bg-body: #FAF9F6;       /* Warm Off-White (Paper) */
            --bg-card: #FFFFFF;
            --bg-accent-subtle: #F3E8FF; /* Very light Violet */
            
            /* Text Colors */
            --text-header: #111827;   /* Almost Black */
            --text-body: #4B5563;     /* Warm Gray */
            --text-sub: #9CA3AF;      /* Light Gray */
            
            /* Accents */
            --primary: #8B5CF6;       /* Soft Violet */
            --primary-hover: #7C3AED;
            --primary-text: #FFFFFF;
            
            /* Status Colors (Pastel/Light) */
            --impact-bg: #FFF7ED;     /* Light Orange/Peach for impact */
            --impact-border: #FFEDD5;
            
            /* Structure */
            --radius-card: 24px;
            --radius-btn: 50px;       /* Pill shape */
            --shadow-card: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.01);
            --font-serif: Georgia, 'Times New Roman', Times, serif;
            --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--bg-body);
            color: var(--text-body);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            line-height: 1.7;
        }

        #app-container {
            background: var(--bg-card);
            width: 100%;
            max-width: 680px;
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-card);
            overflow: hidden;
            position: relative;
        }

        /* Decorative Top Line */
        #app-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary), #C084FC);
        }

        /* Header Area */
        .simulation-header {
            padding: 40px 40px 20px 40px;
            text-align: center;
        }

        .competency-label {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--primary);
            font-weight: 700;
            display: block;
            margin-bottom: 12px;
        }

        .competency-title {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--text-header);
            margin: 0;
            line-height: 1.3;
        }

        /* Main Content Area */
        .content-area {
            padding: 20px 40px 40px 40px;
            animation: fadeIn 0.6s ease-out;
        }

        /* Scenario Box */
        .scenario-box {
            margin-bottom: 32px;
            text-align: center;
        }

        .scenario-text {
            font-size: 1.1rem;
            color: var(--text-header);
            font-weight: 400;
        }

        /* Options */
        .options-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid #F3F4F6;
            padding: 20px 28px;
            text-align: left;
            border-radius: var(--radius-card); /* Softer corners */
            cursor: pointer;
            font-family: var(--font-sans);
            font-size: 1rem;
            color: var(--text-body);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .option-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
        }

        .option-label {
            font-weight: 700;
            color: var(--primary);
            margin-right: 8px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Feedback / Reflection Screen */
        .impact-section {
            margin-bottom: 32px;
        }

        .impact-title {
            font-family: var(--font-sans);
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-sub);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .impact-card {
            background: var(--impact-bg);
            border: 1px solid var(--impact-border);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 24px;
        }
        
        /* Success specific styling override */
        .impact-card.success {
            background: var(--bg-accent-subtle);
            border-color: #E9D5FF;
        }

        .impact-card ul {
            margin: 0;
            padding-left: 20px;
            color: var(--text-header);
        }
        
        .impact-card li {
            margin-bottom: 8px;
        }

        .analysis-text {
            color: var(--text-body);
            font-size: 1rem;
            font-style: italic;
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-top: 16px;
            margin-top: 16px;
        }

        /* Buttons */
        .action-btn {
            background-color: var(--primary);
            color: var(--primary-text);
            border: none;
            padding: 16px 36px;
            border-radius: var(--radius-btn);
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: block;
            width: 100%;
            transition: background 0.2s;
            box-shadow: 0 4px 6px -1px rgba(139, 92, 246, 0.3);
        }

        .action-btn:hover {
            background-color: var(--primary-hover);
        }
        
        .action-btn.secondary {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }
        
        .action-btn.secondary:hover {
            background-color: var(--bg-accent-subtle);
        }

        /* Fade Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

<div id="app-container">
    <div class="simulation-header">
        <span class="competency-label">Competency Focus</span>
        <h1 class="competency-title">Clearly communicates lesson objectives and key concepts at the outset.</h1>
    </div>
    
    <div id="content" class="content-area">
        <!-- Dynamic content will be injected here -->
    </div>
</div>

<script>
    // --- SIMULATION CONTENT ---
    
    const simulationData = {
        scenarios: [
            // SCENARIO 1
            {
                id: 1,
                context: "You are about to begin a new lesson. Students are settling down, and you want to start the class effectively.",
                options: [
                    {
                        label: "Option A",
                        text: "Review the previous day's homework immediately to ensure everyone did it.",
                        type: "confusing", 
                        reactions: [
                            "Students switch to 'task mode' but are unsure what the NEW learning goal is.",
                            "Engagement is limited to checking boxes rather than curiosity."
                        ],
                        impact: "The start feels disjointed. Time is spent on past compliance rather than future learning.",
                        analysis: "This choice prioritizes administrative tasks over instructional clarity. It does not set a clear objective for the current lesson."
                    },
                    {
                        label: "Option B",
                        text: "State clearly what students will be able to do by the end of the class and why it matters.",
                        type: "aligned",
                        reactions: [
                            "Students understand the goal of the lesson.",
                            "They begin making connections to what they already know."
                        ],
                        impact: "The lesson starts with focus. Students are mentally prepared for the new content."
                    },
                    {
                        label: "Option C",
                        text: "Tell the students to open page 45 and start reading silently.",
                        type: "misaligned",
                        reactions: [
                            "Students comply mechanically, but some are visibly disengaged.",
                            "Students do not understand the purpose of the reading."
                        ],
                        impact: "Low engagement. You will likely have to interrupt later to explain what they should be looking for.",
                        analysis: "Assigning a task without context leads to passive compliance, not active learning. The objective remains unclear."
                    }
                ]
            },
            // SCENARIO 2 (Follow-up)
            {
                id: 2,
                context: "Midway through the explanation, a student raises their hand and asks: 'Why do we need to learn this? It seems useless.'",
                options: [
                    {
                        label: "Option A",
                        text: "Explain a specific real-world application of the concept relevant to their lives.",
                        type: "aligned",
                        reactions: [
                            "The student perks up and listens more intently.",
                            "Other students nod, seeing the personal value."
                        ],
                        impact: "The disruption becomes a learning moment that reinforces the objective."
                    },
                    {
                        label: "Option B",
                        text: "Tell them it will be on the final exam so they need to know it.",
                        type: "misaligned",
                        reactions: [
                            "The student nods but looks bored/resigned.",
                            "Motivation shifts from learning to fear of failure."
                        ],
                        impact: "You have secured compliance, but lost genuine engagement.",
                        analysis: "Using grades as the sole justification bypasses the opportunity to connect the objective to the student's reality."
                    },
                    {
                        label: "Option C",
                        text: "Ask them to hold all questions until the end of the lecture to maintain flow.",
                        type: "confusing",
                        reactions: [
                            "The student disengages and stops taking notes.",
                            "The class feels that curiosity is a distraction."
                        ],
                        impact: "A key opportunity to clarify the 'Why' of the lesson is missed.",
                        analysis: "While this protects your timeline, it signals that the lesson plan is more important than student understanding."
                    }
                ]
            }
        ],
        finalInsight: "Aligning your actions with clear objectives helps students stay focused, confident, and engaged throughout the lesson. Consistency builds trust in your leadership."
    };

    // --- STATE MANAGEMENT ---
    
    let currentScenarioIndex = 0;
    let isRetryState = false; // Tracks if we are currently re-trying a scenario

    const contentDiv = document.getElementById('content');

    // --- RENDER FUNCTIONS ---

    // 1. Render Scenario (Input Phase)
    function renderScenario() {
        const scenario = simulationData.scenarios[currentScenarioIndex];
        
        // If it's a retry, we add a specific header
        const retryHeader = isRetryState 
            ? `<p style="color: var(--primary); font-weight:600; margin-bottom:16px;">Given the previous outcome, consider your approach:</p>` 
            : `<p class="scenario-text"><strong>Scenario:</strong> ${scenario.context}</p>`;

        const optionsHTML = scenario.options.map((opt, index) => `
            <button class="option-btn" onclick="handleDecision(${index})">
                <span class="option-label">${opt.label}</span> ${opt.text}
            </button>
        `).join('');

        contentDiv.innerHTML = `
            <div class="scenario-box">
                ${retryHeader}
                ${isRetryState ? '' : ''}
            </div>
            
            <div class="options-group">
                ${optionsHTML}
            </div>
        `;
    }

    // 2. Handle Decision Logic
    window.handleDecision = function(optionIndex) {
        const scenario = simulationData.scenarios[currentScenarioIndex];
        const selectedOption = scenario.options[optionIndex];

        if (selectedOption.type === 'aligned') {
            renderAlignedOutcome(selectedOption);
        } else {
            renderMisalignedOutcome(selectedOption);
        }
    };

    // 3. Render Misaligned Outcome (Reflection Phase)
    function renderMisalignedOutcome(option) {
        // Construct the consequences list
        const reactionList = option.reactions.map(r => `<li>${r}</li>`).join('');

        contentDiv.innerHTML = `
            <div class="impact-section">
                <div class="impact-title">Immediate Classroom Consequence</div>
                <div class="impact-card">
                    <ul>${reactionList}</ul>
                    <div style="margin-top:16px;"><strong>Instructional Impact:</strong> ${option.impact}</div>
                </div>
                
                <div class="impact-title">Analysis</div>
                <div class="impact-card" style="background: #F9FAFB; border-color: #E5E7EB;">
                    <p style="margin:0; color: var(--text-body);">${option.analysis}</p>
                </div>
            </div>

            <button class="action-btn secondary" onclick="triggerRetry()">Reflect and Retry</button>
        `;
    }

    // 4. Trigger Retry
    window.triggerRetry = function() {
        isRetryState = true;
        renderScenario(); // Re-render the same scenario
    };

    // 5. Render Aligned Outcome (Success Phase)
    function renderAlignedOutcome(option) {
        const reactionList = option.reactions.map(r => `<li>${r}</li>`).join('');

        const isLastScenario = currentScenarioIndex >= simulationData.scenarios.length - 1;
        const buttonText = isLastScenario ? "Complete Simulation" : "Continue to Next Scenario";
        const buttonAction = isLastScenario ? "renderFinal()" : "nextScenario()";

        contentDiv.innerHTML = `
            <div class="impact-section">
                <div class="impact-title" style="color: var(--primary);">Outcomes</div>
                <div class="impact-card success">
                    <p><strong>Classroom Response:</strong></p>
                    <ul>${reactionList}</ul>
                    <p style="margin-top:12px;">${option.impact}</p>
                </div>
            </div>

            <button class="action-btn" onclick="${buttonAction}">${buttonText}</button>
        `;
    }

    // 6. Move to Next Scenario
    window.nextScenario = function() {
        currentScenarioIndex++;
        isRetryState = false; // Reset retry state for new level
        renderScenario();
    };

    // 7. Render Final Insight
    window.renderFinal = function() {
        contentDiv.innerHTML = `
            <div style="text-align: center; padding: 20px 0;">
                <h2 style="font-family: var(--font-serif); color: var(--text-header); margin-bottom: 24px;">Simulation Complete</h2>
                <div style="background: var(--bg-accent-subtle); padding: 32px; border-radius: var(--radius-card); text-align: left;">
                    <strong style="display:block; margin-bottom:12px; color: var(--primary); text-transform:uppercase; letter-spacing:1px; font-size:0.85rem;">Professional Insight</strong>
                    <span style="font-size:1.1rem; color: var(--text-header);">${simulationData.finalInsight}</span>
                </div>
                <button class="action-btn secondary" style="margin-top: 30px;" onclick="location.reload()">Restart Simulation</button>
            </div>
        `;
    };

    // Initialize
    renderScenario();

</script>

</body>
</html>
